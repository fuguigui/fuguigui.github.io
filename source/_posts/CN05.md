---
title: Generating function
date: 2019-07-17
tags: [complex system, network]
categories: course notes
---

# Aims

- make statements about the properties of a network if we only know the degree distribution
- properties of generating function
- analyze the friendship paradox

# Questions

- what is a generating function?
  - a function to encode a sequence of integer probability.
- what does the m-th power of a generating function ![img](http://latex.codecogs.com/svg.latex?G_0%28x%29) generate?
  - ![img](http://latex.codecogs.com/svg.latex?%5Clangle k%5Em%5Crangle)
  - derivate and multiplied by ![img](http://latex.codecogs.com/svg.latex?x) and set ![img](http://latex.codecogs.com/svg.latex?x) as 1.
- How is the second raw moment of a distribution related to its variance?
  - variance = second RM - first RM
- How is the first raw moment of a distribution related to its mean?
  - equal??? Exactly.
- What does the composition ![img](http://latex.codecogs.com/svg.latex?G_1%28G_0%28x%29%29) generate? 
- what is the friendship paradox?
  - the average friends number of your friends is larger than the average friends number of yours.
- what practical applications of the friendship paradox can you think of?

# Generating functions

it provide a general tool for us to make **analytical** statements about the **expected properties** of networks generated from a **statistical ensemble** with **arbitrary** degree distributions.

## Functions

- it is maybe the most important methodology in the **macroscopic** study of complex networks
- it explains why **degree distributions** are such an important aggregate characteristic of complex networks.
- it is helpful to understand how widely known results about networks are derived
- it will help us  to understand **the limitation of the ensemble perspective**.
- It is a fancy way to **encode a sequence of numbers**. 

## Definition

Given an integer probability sequence, ![img](http://latex.codecogs.com/svg.latex?%28p%281%29%2Cp%282%29%2C%5Ccdots%2C%20p%28n%29%2C%5Ccdots%29%2C %5CSigma_%7Bi%3D1%7Dp%28i%29%3D1)

 ![img](http://latex.codecogs.com/svg.latex?G_0%28x%29%3D%5CSigma_%7Bi%3D1%7Dp%28i%29x%5Ei%2Cx%5Cin%20%5B0%2C1%5D)

- the probability: the object must be an integer, 
  - could be 0, 
  - could be infinite.
- ![img](http://latex.codecogs.com/svg.latex?x) must in the range from 0 to 1.

## Calculation

### Derivation

#### The probability

![img](http://latex.codecogs.com/svg.latex?P%28k%29) is the parameter of ![img](http://latex.codecogs.com/svg.latex?x%5Ek), so we have

![img](http://latex.codecogs.com/svg.latex?%5B%5Cfrac%7B1%7D%7Bk%21%7D%5Cfrac%7Bd%5Ek%7D%7Bdx%5Ek%7DG_0%28x%29%5D_%7Bx%3D0%7D%20%3D%20P%28k%29)

- derivate by k times, to eliminate the items with power less than k.
- set ![img](http://latex.codecogs.com/svg.latex?x) as 0, to eliminate the items with power larger than k.
- divided by ![img](http://latex.codecogs.com/svg.latex?k!) to eliminate the power influence on the parameter.

#### The average degree

![img](http://latex.codecogs.com/svg.latex?G_0%27%281%29%3D%5B%5CSigma_%7Bk%3D0%7D%5E%5Cinfty%20kP%28k%29%20x%5E%7Bk-1%7D%5D_%7Bx%3D1%7D%20%3D%20%5CSigma_%7Bk%3D0%7DkP%28k%29%20%3D%20%5Clangle k%5Crangle)

- take the **first** derivative, to pull down the integer.
- set ![img](http://latex.codecogs.com/svg.latex?x) as 1, to eliminate the ![img](http://latex.codecogs.com/svg.latex?x)'s influence.

#### m-th raw moment of P(k)

![img](http://latex.codecogs.com/svg.latex?%5B%28x%5Cfrac%7Bd%7D%7Bdx%7D%29%5EmG_0%28x%29%5D_%7Bx%3D1%7D%3D%5CSigma_%7Bk%3D0%7D%5E%7B%5Cinfty%7Dk%5EmP%28k%29%3D%5Clangle k%5Em%5Crangle)

- the ![img](http://latex.codecogs.com/svg.latex?k) is on the index, so take derivative to pull it as a multiplier. 
- multiplied by ![img](http://latex.codecogs.com/svg.latex?x) to make up the "![img](http://latex.codecogs.com/svg.latex?k)". Actually, only the first ![img](http://latex.codecogs.com/svg.latex?k-1) times matter. The last ![img](http://latex.codecogs.com/svg.latex?x) is just for the form unified.
- set ![img](http://latex.codecogs.com/svg.latex?x) as 1, to keep ![img](http://latex.codecogs.com/svg.latex?P%28k%29) while eliminating the ![img](http://latex.codecogs.com/svg.latex?x)'s influence.

### Multiplication

Suppose ![img](http://latex.codecogs.com/svg.latex?Z%3DX%2BY),

![img](http://latex.codecogs.com/svg.latex?G_Z%28x%29%3DG_%7BX%2BY%7D%28x%29%3DG_X%28x%29G_Y%28x%29)

the distribution of the sum of two random independent variable X and Y.

From the multiplication, we have many variants:


#### A "new" variable X

![img](http://latex.codecogs.com/svg.latex?xG_0%28x%29) generates distribution of ![img](http://latex.codecogs.com/svg.latex?P%28X%3Dk-1%29%3DP%28X%2B1%3Dk%29).

We can understand by 

- we take ![img](http://latex.codecogs.com/svg.latex?G_Y%28x%29%3D0%2Bx%2B0%5ccdot x%5E2%2B%5ccdots). It corresponds to a random variable Y, which is always 1, ![img](http://latex.codecogs.com/svg.latex?P%28Y%3D1%29%3D1)
- So ![img](http://latex.codecogs.com/svg.latex?xG_0%28x%29%3DG_X%28x%29G_Y%28x%29), means the sum of one variable follows ![img](http://latex.codecogs.com/svg.latex?P_X%28x%29) and the other one, which is always 1. 

![img](http://latex.codecogs.com/svg.latex?%5Cfrac%7B1%7D%7Bx%7DG_0%28x%29) generates distribution of ![img](http://latex.codecogs.com/svg.latex?P%28X%3Dk+1%29%3DP%28X-1%3Dk%29)

Similarly, it can be understood by add a random variable, which is always be -1. cause ![img](http://latex.codecogs.com/svg.latex?x%5E%7B-1%7D%3D%5cfrac%7B1%7D%7bx%7D)

#### Power

This is a variant of multiplication.

m-th power ![img](http://latex.codecogs.com/svg.latex?%5BG_0%28x%29%5D%5Em) generates distribution for the **sum** of **m** independent realizations of random variable X, given the distribution of X.

e.g. ![img](http://latex.codecogs.com/svg.latex?%5BG_0%28x%29%5D%5E2%20%3D%20%5CSigma_%7Bi%2Bj%3D0%7D%5E%7B%5Cinfty%7DP%28i%29P%28j%29x%5E%7Bi%2Bj%7D)

![img](http://latex.codecogs.com/svg.latex?%5BG_0%28x%29%5D%5Em%20%3D%20%5CSigma_%7Bk_1%2Bk_2%2B%5cdots%2Bk_m%3D0%7D%5E%7B%5Cinfty%7DP%28k_1%29P%28k_2%29%5ccdotsP%28k_m%29%5E%7Bk_1%2B%5ccdots%2Bk_m%7D)

### Composition

![img](http://latex.codecogs.com/svg.latex?G_1%28G_0%28x%29%29) generates the sum of  a random number ![img](http://latex.codecogs.com/svg.latex?n_i) of variable ![img](http://latex.codecogs.com/svg.latex?X).

![img](http://latex.codecogs.com/svg.latex?G_1%28G_0%28x%29%29%3D%5CSigma_%7Bk%3D0%7DP_1%28k%29%5BG_0%28x%29%5D%5Ek)

-  a random number ![img](http://latex.codecogs.com/svg.latex?n_i) follows the distribution given by ![img](http://latex.codecogs.com/svg.latex?G_1%28x%29)
- the variable X follows the distribution given by ![img](http://latex.codecogs.com/svg.latex?G_0%28x%29)

Example: we have two dice, one with six sides, and the second one with eight sides.

- We throw the 6-one to decide how many times we throws the 8-one.
- we sum the number of the 8-one.
- we get the distribution of this sum.

## "0" and "1"

- ![img](http://latex.codecogs.com/svg.latex?G_0%281%29%3D%5cSigma_%7Bk%3D0%7DP%28k%29%5ccdot 1%3D1)
- ![img](http://latex.codecogs.com/svg.latex?G_0%280%29%3D%5cSigma_%7Bk%3D0%7DP%28k%29%5ccdot 0%3D0)

## Applications

### Networks

![img](http://latex.codecogs.com/svg.latex?G_0%28x%29) generates the **degree distribution**.

# Friendship paradox

Your friends have, on average, more friends than you.

Mathematically, ![img](http://latex.codecogs.com/svg.latex?%5Clangle k_n%5Crangle%3E%5Clangle k%5Crangle)

- ![img](http://latex.codecogs.com/svg.latex?%5Clangle k%5Crangle) can be achieved by ![img](http://latex.codecogs.com/svg.latex?G_0%28x%29), which generates the given degree distribution.

  ![img](http://latex.codecogs.com/svg.latex?%5Clangle k%5Crangle%3D%5Cfrac%7B1%7D%7BN%7D%5CSigma_%7Bi%3D1%7D%5EN%7Bk%7D_i%0A)

- ![img](http://latex.codecogs.com/svg.latex?%5Clangle k_n%5Crangle) means the average number of node's neighbors degree. Mathematically, ![img](http://latex.codecogs.com/svg.latex?%5Clangle k_n%5Crangle%3D%5Cfrac%7B1%7D%7BN%7D%5CSigma_%7Bi%3D1%7D%5EN%7B%5Cbar%7Bk%7D_i%7D%0A)

  - where ![img](http://latex.codecogs.com/svg.latex?%5Cbar%7Bk%7D_i) means how many neighbors on average, does node ![img](http://latex.codecogs.com/svg.latex?i)'s neighbors have. Mathematically, ![img](http://latex.codecogs.com/svg.latex?%5Cbar%7Bk%7D_i%3D%5Cfrac%7B1%7D%7Bk_i%7D%5CSigma_%7Bj%5Cin%20I_i%7D%20d_j), ![img](http://latex.codecogs.com/svg.latex?I_i) denotes the set of node ![img](http://latex.codecogs.com/svg.latex?i)'s neighbor.
  
- Trick: if we can know the degree distribution of a node's neighbor from the original node distribution, we will solve this problem. That is the probability ![img](http://latex.codecogs.com/svg.latex?P_1%28X%3Dk%29) means a neighbor of a node has degree ![img](http://latex.codecogs.com/svg.latex?k).

## The degree distribution of a node's neighbor

We define ![img](http://latex.codecogs.com/svg.latex?P_1%28X%3Dk%29) as above. This probability means I randomly select a node's neighbor, the probability of its degree is k. 

- If a node has degree k, it has k times to be others' neighbor. So, ![img](http://latex.codecogs.com/svg.latex?P_1%28X%3Dk%29%5Csim kP_0%28k%29). 

- we **normalize** by the sum of ![img](http://latex.codecogs.com/svg.latex?P_1%28X%3Dk%29) over ![img](http://latex.codecogs.com/svg.latex?k). It is 

  ![img](http://latex.codecogs.com/svg.latex?%5CSigma_k P_1%28k%29%3D%5CSigma kP_0%28k%29%3D%5Clangle k%5Crangle)

- So, we get 

  ![img](http://latex.codecogs.com/svg.latex?P_1%28X%3Dk%29%3D%5Cfrac%7BkP_0%28k%29%7D%7B%5Clangle k%5Crangle%7D)
  
- We can define ![img](http://latex.codecogs.com/svg.latex?G_1%28x%29) by ![img](http://latex.codecogs.com/svg.latex?P_1%28X%3D k%29), not including the edge linking these two nodes. 

  ![img](http://latex.codecogs.com/svg.latex?G_1%28x%29%3D%5Cfrac%7B1%7D%7Bx%7D%5CSigma_%7Bi%3D1%7DP_1%28i%29x%5Ei%3D%5Cfrac%7BG_0'%28x%29%7D%7B%5Clangle k%5Crangle%7D)

- The average degree 

  

  ![img](http://latex.codecogs.com/svg.latex?%5Clangle k_n%5Crangle%3D1%2BG_1%27%281%29%3D1%2B%5Cfrac%7BG_0%27%27%281%29%7D%7BG_0%27%281%29%7D%3D%5CSigma_%7Bi%3D1%7DiP_1%28i%29%3D%5CSigma_%7Bi%3D1%7Di%5E2%5Cfrac%7BP_0%28i%29%7D%7B%5Clangle k%5Crangle%7D%3D%5Cfrac%7B%5Clangle k%5E2%5Crangle%7D%7B%5Clangle k%5Crangle%7D)

- The key is the **variance** of the degree sequence!!!

## Variant

Also, we can define ![img](http://latex.codecogs.com/svg.latex?P_2%28X%3Dk%29%3DP_1%28X%3Dk%2B1%29). The probability of a degree of a node's neighbor

According to the calculation property of generating function, it is easy to get

- ![img](http://latex.codecogs.com/svg.latex?G_2%28x%29%3DxG_1%28x%29%3D%5Cfrac%7BxG_0'%28x%29%7D%7B%5Clangle k%5Crangle%7D)

Besides, we can define ![img](http://latex.codecogs.com/svg.latex?G_0%28G_1%28x%29%29) : the distribution of the number of **second-neighbor**.

## Applications

- vaccination strategy: Instead of sampling random individuals, we ask them to name a random friend and then offer this friend to receive a vaccination. This simple strategy has a larger impact than the vaccination of a random sample of the population.
- explore topology. Study from the friends to get **upper limit**.